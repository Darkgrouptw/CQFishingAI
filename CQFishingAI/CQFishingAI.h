#pragma once

#include <QtWidgets/QMainWindow>
#include "ui_CQFishingAI.h"
#include "GlobalDefine.h"

//////////////////////////////////////////////////////////////////////////
// Recognize 的部分
//////////////////////////////////////////////////////////////////////////
#include "RecognizableObject.h"
#include "Wheel.h"

#include <iostream>
#include <cassert>

#include <QDir>
#include <QTimer>
#include <QSize>
#include <QVector>
#include <QVector2D>
#include <QTextCodec>

#include <opencv2/opencv.hpp>
//#include <opencv2/imgproc.hpp>

using namespace std;
using namespace cv;

class CQFishingAI : public QMainWindow
{
	Q_OBJECT

public:
	CQFishingAI(QWidget *parent = Q_NULLPTR);
	~CQFishingAI();

private:
	Ui::CQFishingAIClass ui;

	//////////////////////////////////////////////////////////////////////////
	// Helper Function
	//////////////////////////////////////////////////////////////////////////


	//////////////////////////////////////////////////////////////////////////
	// 辨別相關的 Code
	// 0. 轉輪
	//////////////////////////////////////////////////////////////////////////
	QVector<RecognizableObject*> RecognizeArray;

	//////////////////////////////////////////////////////////////////////////
	// 系統相關參數 (後面要搬到 CaptureScreen 的 Function 裡)
	//////////////////////////////////////////////////////////////////////////
	const QSize		ScreenSize							= QSize(1422, 886);
	const QVector2D	UsefulStartPosition					= QVector2D(8, 47);
	const QVector2D	UsefulEndPosition					= QVector2D(1414, 838);


	//////////////////////////////////////////////////////////////////////////
	// 計時相關的
	//////////////////////////////////////////////////////////////////////////
	QTimer			*timer;
	const int		FPS = 60;
	float			millisec = 1000.0 / FPS;
	int				times = 0;

	//////////////////////////////////////////////////////////////////////////
	// 測試使用
	// TEST_ON_VIDEO & DEBUG_RESULT
	//////////////////////////////////////////////////////////////////////////
	VideoCapture	capVideo;
	QString			videoLocation = "C:/Users/Dark/Documents/Bandicam/8-1.mp4";
	QString			OrgWindowTitle = "Original Image";
	QString			FeatureWindowTitle = "Feature Image";
	float			ResultDebugSizeScale = 1.5f;

private slots:
	void			CaptureScreen();											// 要去拿畫面資料了						
};
